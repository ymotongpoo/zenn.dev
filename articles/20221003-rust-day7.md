---
title: "Rustã®å‹‰å¼· 7æ—¥ç›®"
emoji: "ðŸ¦€"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["rust", "exercise"]
published: true
---

## The Rust Programming Language æ—¥æœ¬èªžç‰ˆ ç¬¬7ç« 

### 7.1 ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã‚¯ãƒ¬ãƒ¼ãƒˆ

* ã‚¯ãƒ¬ãƒ¼ãƒˆã«ã¯ãƒã‚¤ãƒŠãƒªã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®2ç¨®é¡žãŒã‚ã‚‹
* ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ `Cargo.toml` ã§ãƒ“ãƒ«ãƒ‰æ–¹æ³•ã«é–¢ã™ã‚‹æƒ…å ±ã‚’ä¿æŒ
* `cargo new` ã§æ–°è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œæˆ
  * `src/main.rs` ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã¨åŒåã®ãƒã‚¤ãƒŠãƒªã‚¯ãƒ¬ãƒ¼ãƒˆã®ãƒ«ãƒ¼ãƒˆ
  * `src/lib.rs` ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã¨åŒåã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¯ãƒ¬ãƒ¼ãƒˆã®ãƒ«ãƒ¼ãƒˆ

### 7.2 ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å®šç¾©ã—ã¦ã€ã‚¹ã‚³ãƒ¼ãƒ—ã¨ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã‚’åˆ¶å¾¡ã™ã‚‹

* ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œã‚‹å ´åˆ `cargo new --lib` ã§å‡ºæ¥ã‚‹
* ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã‚¯ãƒ¬ãƒ¼ãƒˆå†…ã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã™ã‚‹ã€‚ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã®åˆ¶å¾¡ã‚‚ã™ã‚‹ã€‚
* `mod` ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ä½œæˆã™ã‚‹
  * ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ãƒã‚¹ãƒˆã§ãã‚‹
* ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ãƒ„ãƒªãƒ¼æ§‹é€ ã§ç®¡ç†ã•ã‚Œã‚‹
  * ä¸€ç•ªã®è¦ªã¯å¿…ãš `crate` ã¨ã„ã†ã‚¯ãƒ¬ãƒ¼ãƒˆã¨ãªã‚‹

### 7.3 ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ„ãƒªãƒ¼ã®è¦ç´ ã‚’ç¤ºã™ãŸã‚ã®ãƒ‘ã‚¹

* ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ‘ã‚¹ã¯ç›¸å¯¾ãƒ‘ã‚¹ã§ã‚‚çµ¶å¯¾ãƒ‘ã‚¹ã§ã‚‚ `::` ã®åŒºåˆ‡ã‚Šã§è¡¨ã™
  * çµ¶å¯¾ã¨ç›¸å¯¾ã®è¡¨ã—æ–¹ã¯ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã¨ä¼¼ã¦ã„ã‚‹
  * è¦ªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ç›¸å¯¾ãƒ‘ã‚¹ã¯ `super` ã§å§‹ã‚ã‚Œã°ã‚ˆã„ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã§è¨€ã†ã¨ã“ã‚ã® `..`ï¼‰
* ã‚ã‚‰ã‚†ã‚‹è¦ç´ ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ
  * è¦ªã¯å­ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®è¦ç´ ã¯åŽŸå‰‡ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã§ä½¿ãˆãªã„
  * å­ã¯è¦ªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®è¦ç´ ã‚’ä½¿ãˆã‚‹
* `pub` ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ã†ã“ã¨ã§å¤–éƒ¨ã«å…¬é–‹ã§ãã‚‹
  * ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã« `pub` ã‚’ä»˜ã‘ã¦ã‚‚ä¸­èº«ãŒå…¬é–‹ã•ã‚Œã‚‹ã‚ã‘ã§ã¯ãªã„
  * å…¬é–‹ã™ã‚‹è¦ç´ ã”ã¨ã« `pub` ã‚’ä»˜ã‘ãªã„ã¨ã„ã‘ãªã„
  * å…¬é–‹ã™ã‚‹è¦ç´ ã¨ã„ã†ã®ã¯å„æ§‹é€ ä½“ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚‚å«ã‚€ï¼ˆGoã§ã‚‚ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã”ã¨ã«å¤§æ–‡å­—ãƒ»å°æ–‡å­—ã§å…¬é–‹éžå…¬é–‹ã‚’åˆ†ã‘ã¦ã„ã‚‹ã®ã§åŒæ§˜ï¼‰
  * Enumåž‹ã®å ´åˆã¯ `enum` ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®å‰ã« `pub` ã‚’ç½®ãã ã‘ã§å…¨åˆ—æŒ™å­ãŒå…¬é–‹ã•ã‚Œã‚‹ï¼ˆã•ã‚Œãªã„ã¨å›°ã‚‹ã®ã§ç›´æ„Ÿçš„ï¼‰

### 7.4 useã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§ãƒ‘ã‚¹ã‚’ã‚¹ã‚³ãƒ¼ãƒ—ã«æŒã¡è¾¼ã‚€

* `use` ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ã†ã¨ã„ã¡ã„ã¡ç›¸å¯¾ãƒ‘ã‚¹ã‚„çµ¶å¯¾ãƒ‘ã‚¹ã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã‚ãªãã¦æ¸ˆã‚€
* é–¢æ•°ã‚’å‘¼ã¶å ´åˆã¯æ…£ä¾‹ã§ã¯å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ `use` ã—ã¦ã€ `ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å::é–¢æ•°å` ã§å‘¼ã¶
  * ç›´æŽ¥é–¢æ•°ã‚’ `use` ã—ã¦ã—ã¾ã†ã¨åˆ†ã‹ã‚Šã¥ã‚‰ã„
* ãƒ‡ãƒ¼ã‚¿åž‹ã‚’å‘¼ã¶å ´åˆã¯ãƒ•ãƒ«ãƒ‘ã‚¹ã‚’ `use` ã§æŒ‡å®šã™ã‚‹
  * ãƒ‡ãƒ¼ã‚¿åž‹ã«ã¯ãƒ¡ã‚½ãƒƒãƒ‰ãªã©ãŒã‚ã‚‹ã®ã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¾ã§ã¨ã™ã‚‹ã¨è¨˜è¿°é‡ãŒé•·ããªã£ã¦ã—ã¾ã†
* åŒã˜åå‰ã®åž‹ã‚’åŒã˜ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ä½¿ã†å ´åˆã«ã¯è¦ªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã‚’æŒ‡å®šã—ãªã‘ã‚Œã°ã„ã‘ãªã„
  * `as` ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ã†ã¨ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä¸Žãˆã‚‹ã“ã¨ãŒå‡ºæ¥ã€ã“ã‚Œã§åå‰ã®è¡çªã‚’é¿ã‘ã‚‰ã‚Œã‚‹

```rust
use std::fmt;
use std::io;

fn function1() -> fmt::Result { ... }
fn function2() -> io::Result { ... }
```

* `pub use` ã‚’ä½¿ã†ã¨ã€è‡ªåˆ†ãŸã¡ãŒ `use` ã—ãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãã®ã¾ã¾ã®å½¢ã§å…¬é–‹ã§ãã‚‹
* åŒã˜è¦ªã‚’æŒã¤è¤‡æ•°ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ³¢ã‚«ãƒƒã‚³ã§å›²ã£ã¦ã¾ã¨ã‚ã¦ `use` ã§ãã‚‹
* ã¾ãŸ glob ã‚’ä½¿ã£ã¦ã¾ã¨ã‚ã¦å–ã‚Šè¾¼ã‚€ã“ã¨ã‚‚å‡ºæ¥ã‚‹

```rust
use std::{cmp::Ordering, io};
use std::io::{self, Write};
use std::collections::*;
```

### 7.5 ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¤‡æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ†å‰²ã™ã‚‹

* ãƒ–ãƒ­ãƒƒã‚¯ã‚’ä½œã‚‰ãšã« `mod ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å;` ã¨ã„ã†æ–‡ã‚’æ›¸ãã¨ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã¨åŒåã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ä¸­èº«ã‚’å¼•ã£å¼µã£ã¦ãã‚‹

## Rustlings

modules ãŒç¬¬7ç« ã«ç›¸å½“ã™ã‚‹ã®ã§ã‚„ã£ã¦ã¿ã‚‹

### modules1.rs

`sausage_factory` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è‡ªä½“ã¨ãã®ä¸­ã® `make_sausage` é–¢æ•°ã¯ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãªã®ã§ã€`pub` ã‚’ä½¿ã£ã¦å…¬é–‹ã™ã‚‹

```rust
pub mod sausage_factory {
    // Don't let anybody outside of this module see this!
    fn get_secret_recipe() -> String {
        String::from("Ginger")
    }

    pub fn make_sausage() {
        get_secret_recipe();
        println!("sausage!");
    }
}

fn main() {
    sausage_factory::make_sausage();
}
```

### modules2.rs

`fruits` ã¨ `veggies` ã®ä¸­ã® `const` ã®å®£è¨€æ–¹æ³•ã¯ã‚ˆãã‚ã‹ã‚‰ãªã„ã‘ã©ã€ `println!` ã®ä¸­ã§å‚ç…§ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ãŒå­˜åœ¨ã—ãªã„ã®ã§ã€ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¨ã—ã¦å®šç¾©ã—ãŸã€‚

```rust
pub mod delicious_snacks {
    pub use self::fruits::PEAR as fruit;
    pub use self::veggies::CUCUMBER as veggie;

    mod fruits {
        pub const PEAR: &'static str = "Pear";
        pub const APPLE: &'static str = "Apple";
    }

    mod veggies {
        pub const CUCUMBER: &'static str = "Cucumber";
        pub const CARROT: &'static str = "Carrot";
    }
}

fn main() {
    println!(
        "favorite snacks: {} and {}",
        delicious_snacks::fruit,
        delicious_snacks::veggie
    );
}
```

### modules3.rs

å•é¡Œã®ã‚³ãƒ¡ãƒ³ãƒˆã« `std::time` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã‚ã‚‹ã‚ˆã€ã£ã¦æ›¸ã„ã¦ã‚ã£ãŸã®ã§ã€ã¾ã¨ã‚ã¦ `use` ã—ãŸã€‚

```rust
use std::time::{SystemTime, UNIX_EPOCH};

fn main() {
    match SystemTime::now().duration_since(UNIX_EPOCH) {
        Ok(n) => println!("1970-01-01 00:00:00 UTC was {} seconds ago!", n.as_secs()),
        Err(_) => panic!("SystemTime before UNIX EPOCH!"),
    }
}
```
