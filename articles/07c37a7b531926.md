---
title: "Hypothesisã§è‡ªåˆ†ã§ä½œã£ãŸã‚¯ãƒ©ã‚¹ã§ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ãƒ¼ã‚’ä½œã‚‹"
emoji: "ğŸ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics:  ["Hypothesis", "PropertyBasedTesting", "test"]
published: true
---

:::message
ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±

* Hypothesis: v6.47.2
* Python: 3.10.5
:::

ãŸã¨ãˆã°ãƒˆãƒ©ãƒ³ãƒ—ã®ã‚«ãƒ¼ãƒ‰ã‚’è¡¨ã™ `Card` ã‚¯ãƒ©ã‚¹ãŒæ¬¡ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¦ã„ãŸã¨ã™ã‚‹ã€‚

```python
from enum import Enum

class Suit(Enum):
    CLUB = 1
    DIAMOND = 2
    HEART = 3
    SPADE = 4

class Card(Enum):
    def __init__(self, suit: Suit, num: int):
        self.suit = suit
        self.num = int

    def __str__(self):
        return f"Card({self.suit}, {self.num})"
```

## `@composite` ã§ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ãƒ¼ã‚’ä½œã‚‹

æ–°ã—ã„ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ãƒ¼ã‚’ä½œã‚Œã° `@given` ã«æ¸¡ã™ã¨ãã«ã‚¹ãƒƒã‚­ãƒªã™ã‚‹ã®ã§ã€ `@composite` ã§ä½œã£ã¦ã¿ã‚‹ã€‚

```python
@composite
def card(draw):
    s = draw(sampled_from(Suit))
    n = draw(sampled_from(range(1, 14)))
    return Card(s, n)

@given(card())
def test_card(c):
    # cardã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆ
```

ã“ã“ã§ `hypothesis.strategy.sampled_from` ã¯Enumã§ã‚‚ä½¿ãˆã‚‹ã“ã¨ã«æ³¨æ„ã€‚

@[card](https://hypothesis.readthedocs.io/en/latest/data.html#hypothesis.strategies.sampled_from)

> `sampled_from` supports ordered collections, as well as `Enum` objects. `Flag` objects may also generate any combination of their members.

## `builds` ã‚’ä½¿ã†

ä¸Šãã‚‰ã„ã®ä¾‹ã ã¨ã€ã‚ã–ã‚ã– `@composite` ã§æ–°è¦ã«ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ãƒ¼ã‚’ä½œã‚‰ãšã¨ã‚‚ã€ `builds` ã‚’ä½¿ã£ã¦ç›´æ¥ `@given` ã«ã‚ãŸã™ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚

```python
from hypothesis.strategies import builds, sampled_from

@given(builds(Card, sampled_from(Suit), sampled_from(range(1, 14))))
def test_card(c):
    # cardã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆ
```
